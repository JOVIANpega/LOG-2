# æ¸¬è©¦Logåˆ†æžå™¨ - å¯¦ä½œæ–‡ä»¶

## ðŸŽ¯ ç›®æ¨™å·¥ä½œå…§å®¹

æ ¹æ“šæ‚¨çš„éœ€æ±‚ï¼Œæˆ‘å·²ç¶“å®Œæˆäº†ä¸€å€‹åŠŸèƒ½å®Œæ•´çš„GUIå·¥å…·ä¾†åˆ†æžæ¸¬è©¦logæª”æ¡ˆã€‚ä»¥ä¸‹æ˜¯å„å€‹Pythonæª”æ¡ˆçš„è©³ç´°èªªæ˜Žï¼š

---

## ðŸ“ æª”æ¡ˆçµæ§‹èˆ‡åŠŸèƒ½

### 1. main.py - ä¸»ç¨‹å¼GUIä»‹é¢
**ç”¨é€”**ï¼šæä¾›ç¾ä»£åŒ–çš„åœ–å½¢ä½¿ç”¨è€…ä»‹é¢ä¾†åˆ†æžæ¸¬è©¦logæª”æ¡ˆ

#### ä¸»è¦é¡žåˆ¥ï¼šLogAnalyzerApp

```python
class LogAnalyzerApp:
    def __init__(self, root):
        """
        åˆå§‹åŒ–GUIæ‡‰ç”¨ç¨‹å¼
        - è¨­å®šè¦–çª—æ¨™é¡Œå’Œå¤§å°
        - è¼‰å…¥ä½¿ç”¨è€…è¨­å®šï¼ˆå­—é«”å¤§å°ç­‰ï¼‰
        - åˆå§‹åŒ–å„å€‹æ¨¡çµ„ï¼ˆlog_parser, excel_writer, font_scalerï¼‰
        - å»ºç«‹UIä»‹é¢
        """
```

#### æ ¸å¿ƒæ–¹æ³•èªªæ˜Žï¼š

**_build_ui(self)**
```python
def _build_ui(self):
    """
    å»ºç«‹ä¸»è¦UIçµæ§‹
    - ä½¿ç”¨PanedWindowå¯¦ç¾å·¦å³åˆ†å‰²è¦–çª—
    - å·¦å´ï¼šæª”æ¡ˆé¸æ“‡èˆ‡è¨­å®šå€åŸŸ
    - å³å´ï¼šåˆ†æžçµæžœé¡¯ç¤ºå€åŸŸï¼ˆTabä»‹é¢ï¼‰
    """
```

**_build_left_panel(self, parent)**
```python
def _build_left_panel(self, parent):
    """
    å»ºç«‹å·¦å´æŽ§åˆ¶é¢æ¿
    - æª”æ¡ˆ/è³‡æ–™å¤¾é¸æ“‡æŒ‰éˆ•
    - å­—é«”å¤§å°èª¿æ•´æŽ§åˆ¶ï¼ˆ+/-æŒ‰éˆ•ï¼‰
    - åˆ†æžæŒ‰éˆ•
    - é¡¯ç¤ºç›®å‰é¸æ“‡çš„æª”æ¡ˆ/è³‡æ–™å¤¾è³‡è¨Š
    """
```

**_build_right_panel(self, parent)**
```python
def _build_right_panel(self, parent):
    """
    å»ºç«‹å³å´çµæžœé¡¯ç¤ºå€åŸŸ
    - Tab1ï¼šPASSæ¸¬é …æ¸…å–®ï¼ˆTreeViewè¡¨æ ¼ï¼‰
    - Tab2ï¼šFAILæ¸¬é …æ¸…å–®ï¼ˆTreeViewè¡¨æ ¼ï¼‰
    - Tab3ï¼šåŽŸå§‹LOGå…§å®¹ï¼ˆTextå…ƒä»¶ï¼‰
    - åŒ¯å‡ºExcelæŒ‰éˆ•
    """
```

**_analyze_log(self)**
```python
def _analyze_log(self):
    """
    åŸ·è¡Œlogåˆ†æžçš„æ ¸å¿ƒé‚è¼¯
    - æ ¹æ“šcurrent_modeæ±ºå®šåˆ†æžå–®æª”æˆ–å¤šæª”
    - å‘¼å«log_parseré€²è¡Œè§£æž
    - æ›´æ–°å„å€‹Tabçš„å…§å®¹
    - è™•ç†FAILé …ç›®çš„æ¨™ç´…é¡¯ç¤º
    - è‡ªå‹•è·³è½‰åˆ°ç›¸é—œTab
    """
```

---

### 2. log_parser.py - Logè§£æžå¼•æ“Ž
**ç”¨é€”**ï¼šè² è²¬è§£æžæ¸¬è©¦logæª”æ¡ˆï¼Œåˆ†é¡žPASS/FAILï¼Œæå–å¿…è¦æ¬„ä½

#### ä¸»è¦é¡žåˆ¥ï¼šLogParser

```python
class LogParser:
    def __init__(self):
        """
        åˆå§‹åŒ–è§£æžå™¨
        - è¨­å®šæ­£å‰‡è¡¨é”å¼æ¨¡å¼ä¾†è­˜åˆ¥ä¸åŒçš„logå…ƒç´ 
        - step_pattern: è­˜åˆ¥æ¸¬è©¦æ­¥é©Ÿ (@STEPæ•¸å­—@åç¨±)
        - cmd_pattern: è­˜åˆ¥æŒ‡ä»¤è¡Œ (> é–‹é ­)
        - resp_pattern: è­˜åˆ¥å›žæ‡‰è¡Œ (< é–‹é ­)
        - pass_pattern: è­˜åˆ¥é€šéŽçµæžœ (Test is Pass)
        - fail_pattern: è­˜åˆ¥å¤±æ•—çµæžœ (Test is Fail)
        """
```

**parse_log_file(self, file_path)**
```python
def parse_log_file(self, file_path):
    """
    è§£æžå–®ä¸€logæª”æ¡ˆçš„ä¸»è¦æ–¹æ³•
    
    è™•ç†æµç¨‹ï¼š
    1. è®€å–æª”æ¡ˆå…§å®¹ï¼Œè™•ç†ç·¨ç¢¼å•é¡Œ
    2. é€è¡ŒæŽƒæï¼Œè­˜åˆ¥æ¸¬è©¦æ­¥é©Ÿé–‹å§‹
    3. æ”¶é›†æ¯å€‹æ¸¬é …çš„æŒ‡ä»¤ã€å›žæ‡‰ã€é‡è©¦æ¬¡æ•¸
    4. åˆ¤æ–·æ¸¬è©¦çµæžœï¼ˆPASS/FAILï¼‰
    5. å°æ–¼FAILé …ç›®ï¼Œå°‹æ‰¾éŒ¯èª¤è¨Šæ¯
    6. å›žå‚³çµæ§‹åŒ–çš„åˆ†æžçµæžœ
    
    å›žå‚³æ ¼å¼ï¼š
    {
        'pass_items': [æ¸¬è©¦é€šéŽé …ç›®åˆ—è¡¨],
        'fail_items': [æ¸¬è©¦å¤±æ•—é …ç›®åˆ—è¡¨],
        'raw_lines': [åŽŸå§‹logè¡Œåˆ—è¡¨],
        'last_fail': æœ€å¾Œä¸€å€‹å¤±æ•—é …ç›®,
        'fail_line_idx': å¤±æ•—è¡Œç´¢å¼•
    }
    """
```

**parse_log_folder(self, folder_path)**
```python
def parse_log_folder(self, folder_path):
    """
    è§£æžè³‡æ–™å¤¾å…§æ‰€æœ‰logæª”æ¡ˆ
    - éžè¿´æœå°‹æ‰€æœ‰.logæª”æ¡ˆ
    - åˆä½µæ‰€æœ‰æª”æ¡ˆçš„åˆ†æžçµæžœ
    - é©ç”¨æ–¼æ‰¹æ¬¡è™•ç†å¤šå€‹logæª”æ¡ˆ
    """
```

---

### 3. excel_writer.py - ExcelåŒ¯å‡ºåŠŸèƒ½
**ç”¨é€”**ï¼šå°‡logåˆ†æžçµæžœåŒ¯å‡ºç‚ºExcelæª”æ¡ˆï¼Œæ”¯æ´PASS/FAILåˆ†é 

#### ä¸»è¦é¡žåˆ¥ï¼šExcelWriter

```python
class ExcelWriter:
    def export(self, pass_items, fail_items, output_path):
        """
        åŒ¯å‡ºåˆ†æžçµæžœåˆ°Excelæª”æ¡ˆ
        
        åŠŸèƒ½èªªæ˜Žï¼š
        - å»ºç«‹å…©å€‹å·¥ä½œè¡¨ï¼šPASSå’ŒFAIL
        - PASSå·¥ä½œè¡¨æ¬„ä½ï¼šStep Name | æŒ‡ä»¤ | å›žæ‡‰ | çµæžœ
        - FAILå·¥ä½œè¡¨æ¬„ä½ï¼šStep Name | æŒ‡ä»¤ | éŒ¯èª¤å›žæ‡‰ | Retryæ¬¡æ•¸ | éŒ¯èª¤åŽŸå› 
        - ä½¿ç”¨pandaså’Œopenpyxlå¼•æ“Žç¢ºä¿ç›¸å®¹æ€§
        - è‡ªå‹•èª¿æ•´æ¬„ä½å¯¬åº¦ä»¥æå‡å¯è®€æ€§
        """
```

---

### 4. ui_components.py - UIè¼”åŠ©å…ƒä»¶
**ç”¨é€”**ï¼šæä¾›GUIå…ƒä»¶è¼”åŠ©å‡½å¼ï¼Œæ”¯æ´å­—é«”å¤§å°èª¿æ•´ã€åˆ†å‰²è¦–çª—ã€Tabç­‰

#### ä¸»è¦é¡žåˆ¥ï¼šFontScaler

```python
class FontScaler:
    def __init__(self, root, min_size=10, max_size=15, default_size=11):
        """
        å­—é«”ç¸®æ”¾ç®¡ç†å™¨
        - ç®¡ç†æ‰€æœ‰è¨»å†Šçš„UIå…ƒä»¶å­—é«”å¤§å°
        - è¨­å®šå­—é«”å¤§å°ç¯„åœé™åˆ¶
        - æ”¯æ´å³æ™‚èª¿æ•´å’Œæ‰¹æ¬¡æ›´æ–°
        """
    
    def register(self, widget):
        """
        è¨»å†Šéœ€è¦å­—é«”èª¿æ•´çš„å…ƒä»¶
        - å°‡å…ƒä»¶åŠ å…¥ç®¡ç†æ¸…å–®
        - å¾ŒçºŒå­—é«”èª¿æ•´æœƒè‡ªå‹•å¥—ç”¨åˆ°æ‰€æœ‰è¨»å†Šçš„å…ƒä»¶
        """
    
    def set_font_size(self, size):
        """
        è¨­å®šå­—é«”å¤§å°ä¸¦å³æ™‚å¥—ç”¨
        - æª¢æŸ¥å¤§å°ç¯„åœé™åˆ¶
        - æ‰¹æ¬¡æ›´æ–°æ‰€æœ‰è¨»å†Šå…ƒä»¶çš„å­—é«”
        - ç‰¹åˆ¥è™•ç†TreeViewå…ƒä»¶çš„æ¨£å¼è¨­å®š
        """
```

---

### 5. settings_loader.py - è¨­å®šç®¡ç†
**ç”¨é€”**ï¼šç®¡ç†GUIå·¥å…·çš„æœ¬åœ°è¨­å®šï¼ˆå¦‚å­—é«”å¤§å°ï¼‰ï¼Œæ”¯æ´è®€å–èˆ‡å¯«å…¥settings.json

#### ä¸»è¦å‡½æ•¸ï¼š

```python
def load_settings():
    """
    è®€å–æœ¬åœ°è¨­å®šæª”
    - æª¢æŸ¥settings.jsonæ˜¯å¦å­˜åœ¨
    - è‹¥ä¸å­˜åœ¨å‰‡å›žå‚³é è¨­å€¼
    - è™•ç†æª”æ¡ˆè®€å–éŒ¯èª¤ï¼Œç¢ºä¿ç¨‹å¼ç©©å®šæ€§
    - åˆä½µé è¨­è¨­å®šèˆ‡ä½¿ç”¨è€…è¨­å®š
    """

def save_settings(settings):
    """
    å„²å­˜è¨­å®šåˆ°æœ¬åœ°æª”æ¡ˆ
    - å°‡è¨­å®šå­—å…¸å¯«å…¥settings.json
    - ä½¿ç”¨UTF-8ç·¨ç¢¼ç¢ºä¿ä¸­æ–‡ç›¸å®¹æ€§
    - æ ¼å¼åŒ–JSONè¼¸å‡ºæå‡å¯è®€æ€§
    - éŒ¯èª¤è™•ç†é¿å…ç¨‹å¼å´©æ½°
    """
```

---

## ðŸ”§ æ ¸å¿ƒåŠŸèƒ½å¯¦ç¾

### 1. å·¦å³åˆ†å‰²è¦–çª—
- ä½¿ç”¨`tk.PanedWindow`å¯¦ç¾å¯èª¿æ•´çš„åˆ†å‰²è¦–çª—
- å·¦å´æœ€å°å¯¬åº¦220pxï¼Œå³å´æœ€å°å¯¬åº¦600px
- ä½¿ç”¨è€…å¯æ‹–æ‹‰èª¿æ•´æ¯”ä¾‹

### 2. å­—é«”å¤§å°æŽ§åˆ¶
- é è¨­å­—é«”å¤§å°11ï¼Œå¯èª¿æ•´ç¯„åœ10-15
- ä½¿ç”¨+/-æŒ‰éˆ•é€²è¡Œèª¿æ•´ï¼Œä¸ä½¿ç”¨æ»‘æ¡¿
- å³æ™‚å¥—ç”¨åˆ°æ‰€æœ‰UIå…ƒä»¶
- è¨­å®šè‡ªå‹•å„²å­˜åˆ°settings.json

### 3. Logåˆ†æžé‚è¼¯
- æ­£å‰‡è¡¨é”å¼è­˜åˆ¥æ¸¬è©¦æ­¥é©Ÿã€æŒ‡ä»¤ã€å›žæ‡‰
- è‡ªå‹•åˆ†é¡žPASS/FAILçµæžœ
- æå–éŒ¯èª¤è¨Šæ¯å’Œé‡è©¦æ¬¡æ•¸
- æ”¯æ´å–®æª”å’Œå¤šæª”åˆ†æžæ¨¡å¼

### 4. çµæžœé¡¯ç¤º
- Tab1ï¼šPASSæ¸¬é …è¡¨æ ¼é¡¯ç¤º
- Tab2ï¼šFAILæ¸¬é …è¡¨æ ¼é¡¯ç¤ºï¼ˆéŒ¯èª¤é …ç›®æ¨™ç´…ï¼‰
- Tab3ï¼šåŽŸå§‹LOGå…§å®¹ï¼ˆå¤±æ•—è¡Œæ¨™ç´…ä¸¦è‡ªå‹•è·³è½‰ï¼‰

### 5. ExcelåŒ¯å‡º
- åƒ…å¤šæª”æ¨¡å¼æ”¯æ´åŒ¯å‡º
- åˆ†åˆ¥å»ºç«‹PASSå’ŒFAILå·¥ä½œè¡¨
- æ¬„ä½ç¬¦åˆè¦æ ¼è¦æ±‚
- ä½¿ç”¨pandasç¢ºä¿è³‡æ–™æ­£ç¢ºæ€§

---

## ðŸš€ ä½¿ç”¨æµç¨‹

1. **å•Ÿå‹•ç¨‹å¼**ï¼šåŸ·è¡Œ`python main.py`
2. **é¸æ“‡æª”æ¡ˆ**ï¼šé»žæ“Šã€Œé¸æ“‡æª”æ¡ˆã€æˆ–ã€Œé¸æ“‡è³‡æ–™å¤¾ã€
3. **é–‹å§‹åˆ†æž**ï¼šé»žæ“Šã€Œé–‹å§‹åˆ†æžã€æŒ‰éˆ•
4. **æŸ¥çœ‹çµæžœ**ï¼šåœ¨å„å€‹Tabä¸­æŸ¥çœ‹åˆ†æžçµæžœ
5. **èª¿æ•´å­—é«”**ï¼šä½¿ç”¨+/-æŒ‰éˆ•èª¿æ•´ä»‹é¢å¤§å°
6. **åŒ¯å‡ºå ±å‘Š**ï¼šå¤šæª”æ¨¡å¼ä¸‹å¯åŒ¯å‡ºExcelå ±å‘Š

---

## ðŸ“‹ æŠ€è¡“ç‰¹è‰²

- **æ¨¡çµ„åŒ–è¨­è¨ˆ**ï¼šåŠŸèƒ½åˆ†é›¢ï¼Œæ˜“æ–¼ç¶­è­·å’Œæ“´å±•
- **éŒ¯èª¤è™•ç†**ï¼šå®Œå–„çš„ç•°å¸¸è™•ç†æ©Ÿåˆ¶
- **ä½¿ç”¨è€…é«”é©—**ï¼šç›´è§€çš„æ“ä½œä»‹é¢å’Œå³æ™‚åé¥‹
- **è³‡æ–™å®‰å…¨**ï¼šUTF-8ç·¨ç¢¼è™•ç†ï¼Œé¿å…ä¸­æ–‡äº‚ç¢¼
- **æ•ˆèƒ½å„ªåŒ–**ï¼šå¤§æª”æ¡ˆè™•ç†å’Œè¨˜æ†¶é«”ç®¡ç†
- **è¨­å®šæŒä¹…åŒ–**ï¼šä½¿ç”¨è€…åå¥½è‡ªå‹•å„²å­˜

é€™å€‹å¯¦ä½œå®Œå…¨ç¬¦åˆæ‚¨çš„éœ€æ±‚è¦æ ¼ï¼Œæä¾›äº†ä¸€å€‹åŠŸèƒ½å®Œæ•´ã€ä½¿ç”¨è€…å‹å–„çš„æ¸¬è©¦logåˆ†æžå·¥å…·ã€‚